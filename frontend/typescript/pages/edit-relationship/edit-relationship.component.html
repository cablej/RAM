<page-header [identity]="identity"
             tab="GIVE_AUTHORISATION"
             [messages]="globalMessages"
             [giveAuthorisationsEnabled]="giveAuthorisationsEnabled"></page-header>

<representative-details
        [(data)]='newRelationship.representativeDetails'
        (isValid)='representativeIsValid=$event'>
</representative-details>

<authorisation-type
        [data]='newRelationship.authType'
        [options]='relationshipTypeRefs'
        (dataChange)="authTypeChange($event)"
        (isValid)='authTypeIsValid=$event'>
</authorisation-type>

<authorisation-management
        [(data)]='newRelationship.authorisationManagement'
        [attributeNameUsage]='manageAuthAttribute'
        [disabled]="disableAuthMgmt"></authorisation-management>

<authorisation-permissions
        [(attributes)]='newRelationship.permissionAttributes'
        [attributeNameUsages]='permissionAttributeUsages'
        (validationErrors)='authorisationPermissionErrors=$event'></authorisation-permissions>

<div class="panel panel-default">
    <div class="panel-heading">
        <h4><span class="badge square">5</span> {{'addRelationship.accessPeriod.header' | translate}}</h4>
    </div>
    <div class="panel-body">

        <access-period [(data)]='newRelationship.accessPeriod' (isValid)='accessPeriodIsValid=$event'>
        </access-period>

    </div>
</div>

<div class="panel panel-default">
    <div class="panel-heading">
        <h4><span class="badge square">6</span> {{'addRelationship.declaration.header' | translate}}</h4>
    </div>
    <div class="panel-body">
        <relationship-declaration
                [(data)]='newRelationship.declaration'
                [markdown]="markdown"
                (backEvent)="back()"
                (createRelationshipEvent)="submit()"
                (isValid)='declarationIsValid=$event'
                [isAuthorizedBtnEnabled]='accessPeriodIsValid && authTypeIsValid && representativeIsValid'></relationship-declaration>
    </div>
</div>
